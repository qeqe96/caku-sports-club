"use strict";exports.id=627,exports.ids=[627],exports.modules={20627:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{M:()=>J});var e=c(79651),f=c(73684),g=c(64939),h=c(26520),i=a([g]);g=(i.then?(await i)():i)[0];var j="@prisma/adapter-pg",{types:k}=g.default,{builtins:l,getTypeParser:m}=k,n={NAME:19},o={BIT_ARRAY:1561,BOOL_ARRAY:1e3,BYTEA_ARRAY:1001,BPCHAR_ARRAY:1014,CHAR_ARRAY:1002,CIDR_ARRAY:651,DATE_ARRAY:1182,FLOAT4_ARRAY:1021,FLOAT8_ARRAY:1022,INET_ARRAY:1041,INT2_ARRAY:1005,INT4_ARRAY:1007,INT8_ARRAY:1016,JSONB_ARRAY:3807,JSON_ARRAY:199,MONEY_ARRAY:791,NUMERIC_ARRAY:1231,OID_ARRAY:1028,TEXT_ARRAY:1009,TIMESTAMP_ARRAY:1115,TIMESTAMPTZ_ARRAY:1185,TIME_ARRAY:1183,UUID_ARRAY:2951,VARBIT_ARRAY:1563,VARCHAR_ARRAY:1015,XML_ARRAY:143},p=class a extends Error{static typeNames={16:"bool",17:"bytea",18:"char",19:"name",20:"int8",21:"int2",22:"int2vector",23:"int4",24:"regproc",25:"text",26:"oid",27:"tid",28:"xid",29:"cid",30:"oidvector",32:"pg_ddl_command",71:"pg_type",75:"pg_attribute",81:"pg_proc",83:"pg_class",114:"json",142:"xml",194:"pg_node_tree",269:"table_am_handler",325:"index_am_handler",600:"point",601:"lseg",602:"path",603:"box",604:"polygon",628:"line",650:"cidr",700:"float4",701:"float8",705:"unknown",718:"circle",774:"macaddr8",790:"money",829:"macaddr",869:"inet",1033:"aclitem",1042:"bpchar",1043:"varchar",1082:"date",1083:"time",1114:"timestamp",1184:"timestamptz",1186:"interval",1266:"timetz",1560:"bit",1562:"varbit",1700:"numeric",1790:"refcursor",2202:"regprocedure",2203:"regoper",2204:"regoperator",2205:"regclass",2206:"regtype",2249:"record",2275:"cstring",2276:"any",2277:"anyarray",2278:"void",2279:"trigger",2280:"language_handler",2281:"internal",2283:"anyelement",2287:"_record",2776:"anynonarray",2950:"uuid",2970:"txid_snapshot",3115:"fdw_handler",3220:"pg_lsn",3310:"tsm_handler",3361:"pg_ndistinct",3402:"pg_dependencies",3500:"anyenum",3614:"tsvector",3615:"tsquery",3642:"gtsvector",3734:"regconfig",3769:"regdictionary",3802:"jsonb",3831:"anyrange",3838:"event_trigger",3904:"int4range",3906:"numrange",3908:"tsrange",3910:"tstzrange",3912:"daterange",3926:"int8range",4072:"jsonpath",4089:"regnamespace",4096:"regrole",4191:"regcollation",4451:"int4multirange",4532:"nummultirange",4533:"tsmultirange",4534:"tstzmultirange",4535:"datemultirange",4536:"int8multirange",4537:"anymultirange",4538:"anycompatiblemultirange",4600:"pg_brin_bloom_summary",4601:"pg_brin_minmax_multi_summary",5017:"pg_mcv_list",5038:"pg_snapshot",5069:"xid8",5077:"anycompatible",5078:"anycompatiblearray",5079:"anycompatiblenonarray",5080:"anycompatiblerange"};type;constructor(b){super(),this.type=a.typeNames[b]||"Unknown",this.message=`Unsupported column type ${this.type}`}};function q(a){return b=>(0,h.q)(b,a)}function r(a){return a}function s(a){return a}function t(a){return`${a.replace(" ","T")}+00:00`}function u(a){return a.replace(" ","T").replace(/[+-]\d{2}(:\d{2})?$/,"+00:00")}function v(a){return a}function w(a){return a.slice(1)}function x(a){return a}var y=m(l.BYTEA),z=m(o.BYTEA_ARRAY);function A(a){return a}var B={[l.NUMERIC]:r,[o.NUMERIC_ARRAY]:q(r),[l.TIME]:v,[o.TIME_ARRAY]:q(v),[l.TIMETZ]:function(a){return a.replace(/[+-]\d{2}(:\d{2})?$/,"")},[l.DATE]:s,[o.DATE_ARRAY]:q(s),[l.TIMESTAMP]:t,[o.TIMESTAMP_ARRAY]:q(t),[l.TIMESTAMPTZ]:u,[o.TIMESTAMPTZ_ARRAY]:q(u),[l.MONEY]:w,[o.MONEY_ARRAY]:q(w),[l.JSON]:x,[o.JSON_ARRAY]:q(x),[l.JSONB]:x,[o.JSONB_ARRAY]:q(x),[l.BYTEA]:function(a){return y(a)},[o.BYTEA_ARRAY]:z,[o.BIT_ARRAY]:q(A),[o.VARBIT_ARRAY]:q(A),[o.XML_ARRAY]:q(function(a){return a})},C=new Set(["UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH","ERR_TLS_CERT_ALTNAME_FORMAT","ERR_TLS_CERT_ALTNAME_INVALID"]),D=new Set(["ENOTFOUND","ECONNREFUSED","ECONNRESET","ETIMEDOUT"]),E=g.default.types,F=(0,e.y)("prisma:driver-adapter:pg"),G=class{constructor(a,b){this.client=a,this.pgOptions=b}provider="postgres";adapterName=j;async queryRaw(a){F("[js::query_raw] %O",a);let{fields:b,rows:c}=await this.performIO(a),d=b.map(a=>a.name),e=[];try{e=b.map(a=>(function(a){switch(a){case l.INT2:case l.INT4:return f.UE.Int32;case l.INT8:return f.UE.Int64;case l.FLOAT4:return f.UE.Float;case l.FLOAT8:return f.UE.Double;case l.BOOL:return f.UE.Boolean;case l.DATE:return f.UE.Date;case l.TIME:case l.TIMETZ:return f.UE.Time;case l.TIMESTAMP:case l.TIMESTAMPTZ:return f.UE.DateTime;case l.NUMERIC:case l.MONEY:return f.UE.Numeric;case l.JSON:case l.JSONB:return f.UE.Json;case l.UUID:return f.UE.Uuid;case l.OID:return f.UE.Int64;case l.BPCHAR:case l.TEXT:case l.VARCHAR:case l.BIT:case l.VARBIT:case l.INET:case l.CIDR:case l.XML:case n.NAME:return f.UE.Text;case l.BYTEA:return f.UE.Bytes;case o.INT2_ARRAY:case o.INT4_ARRAY:return f.UE.Int32Array;case o.FLOAT4_ARRAY:return f.UE.FloatArray;case o.FLOAT8_ARRAY:return f.UE.DoubleArray;case o.NUMERIC_ARRAY:case o.MONEY_ARRAY:return f.UE.NumericArray;case o.BOOL_ARRAY:return f.UE.BooleanArray;case o.CHAR_ARRAY:return f.UE.CharacterArray;case o.BPCHAR_ARRAY:case o.TEXT_ARRAY:case o.VARCHAR_ARRAY:case o.VARBIT_ARRAY:case o.BIT_ARRAY:case o.INET_ARRAY:case o.CIDR_ARRAY:case o.XML_ARRAY:return f.UE.TextArray;case o.DATE_ARRAY:return f.UE.DateArray;case o.TIME_ARRAY:return f.UE.TimeArray;case o.TIMESTAMP_ARRAY:case o.TIMESTAMPTZ_ARRAY:return f.UE.DateTimeArray;case o.JSON_ARRAY:case o.JSONB_ARRAY:return f.UE.JsonArray;case o.BYTEA_ARRAY:return f.UE.BytesArray;case o.UUID_ARRAY:return f.UE.UuidArray;case o.INT8_ARRAY:case o.OID_ARRAY:return f.UE.Int64Array;default:if(a>=16384)return f.UE.Text;throw new p(a)}})(a.dataTypeID))}catch(a){if(a instanceof p)throw new f.sL({kind:"UnsupportedNativeDataType",type:a.type});throw a}let g=this.pgOptions?.userDefinedTypeParser;if(g)for(let a=0;a<b.length;a++){let d=b[a];if(d.dataTypeID>=16384&&!Object.hasOwn(B,d.dataTypeID))for(let b=0;b<c.length;b++)c[b][a]=await g(d.dataTypeID,c[b][a],this)}return{columnNames:d,columnTypes:e,rows:c}}async executeRaw(a){return F("[js::execute_raw] %O",a),(await this.performIO(a)).rowCount??0}async performIO(a){let{sql:b,args:c}=a,d=c.map((b,c)=>(function a(b,c){if(null===b)return null;if(Array.isArray(b)&&"list"===c.arity)return b.map(b=>a(b,c));if("string"==typeof b&&"datetime"===c.scalarType&&(b=new Date(b)),b instanceof Date)switch(c.dbType){case"TIME":case"TIMETZ":var d=b;let e=(a,b=2)=>String(a).padStart(b,"0"),f=d.getUTCMilliseconds();return e(d.getUTCHours())+":"+e(d.getUTCMinutes())+":"+e(d.getUTCSeconds())+(f?"."+String(f).padStart(3,"0"):"");case"DATE":var g=b;let h=(a,b=2)=>String(a).padStart(b,"0");return h(g.getUTCFullYear(),4)+"-"+h(g.getUTCMonth()+1)+"-"+h(g.getUTCDate());default:var i=b;let j=(a,b=2)=>String(a).padStart(b,"0"),k=i.getUTCMilliseconds();return j(i.getUTCFullYear(),4)+"-"+j(i.getUTCMonth()+1)+"-"+j(i.getUTCDate())+" "+j(i.getUTCHours())+":"+j(i.getUTCMinutes())+":"+j(i.getUTCSeconds())+(k?"."+String(k).padStart(3,"0"):"")}return"string"==typeof b&&"bytes"===c.scalarType?Buffer.from(b,"base64"):ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):b})(b,a.argTypes[c]));try{return await this.client.query({text:b,values:d,rowMode:"array",types:{getTypeParser:(a,b)=>"text"===b&&B[a]?B[a]:E.getTypeParser(a,b)}},d)}catch(a){this.onError(a)}}onError(a){throw F("Error in performIO: %O",a),new f.sL(function(a){if(b=a,"string"==typeof b.code&&"string"==typeof b.syscall&&"number"==typeof b.errno&&D.has(b.code)){var b,c,d=a;switch(d.code){case"ENOTFOUND":case"ECONNREFUSED":return{kind:"DatabaseNotReachable",host:d.address??d.hostname,port:d.port};case"ECONNRESET":return{kind:"ConnectionClosed"};case"ETIMEDOUT":return{kind:"SocketTimeout"}}return}if(function(a){if("string"==typeof a.code)return C.has(a.code);switch(a.message){case"The server does not support SSL connections":case"There was an error establishing an SSL connection":return!0}return!1}(a))return{kind:"TlsConnectionError",reason:a.message};if(c=a,"string"==typeof c.code&&"string"==typeof c.message&&"string"==typeof c.severity&&("string"==typeof c.detail||void 0===c.detail)&&("string"==typeof c.column||void 0===c.column)&&("string"==typeof c.hint||void 0===c.hint))return{originalCode:a.code,originalMessage:a.message,...function(a){switch(a.code){case"22001":return{kind:"LengthMismatch",column:a.column};case"22003":return{kind:"ValueOutOfRange",cause:a.message};case"22P02":return{kind:"InvalidInputValue",message:a.message};case"23505":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"UniqueConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23502":{let b=a.detail?.match(/Key \(([^)]+)\)/)?.at(1)?.split(", ");return{kind:"NullConstraintViolation",constraint:void 0!==b?{fields:b}:void 0}}case"23503":{let b;return a.column?b={fields:[a.column]}:a.constraint&&(b={index:a.constraint}),{kind:"ForeignKeyConstraintViolation",constraint:b}}case"3D000":return{kind:"DatabaseDoesNotExist",db:a.message.split(" ").at(1)?.split('"').at(1)};case"28000":return{kind:"DatabaseAccessDenied",db:a.message.split(",").find(a=>a.startsWith(" database"))?.split('"').at(1)};case"28P01":return{kind:"AuthenticationFailed",user:a.message.split(" ").pop()?.split('"').at(1)};case"40001":return{kind:"TransactionWriteConflict"};case"42P01":return{kind:"TableDoesNotExist",table:a.message.split(" ").at(1)?.split('"').at(1)};case"42703":return{kind:"ColumnNotFound",column:a.message.split(" ").at(1)?.split('"').at(1)};case"42P04":return{kind:"DatabaseAlreadyExists",db:a.message.split(" ").at(1)?.split('"').at(1)};case"53300":return{kind:"TooManyConnections",cause:a.message};default:return{kind:"postgres",code:a.code??"N/A",severity:a.severity??"N/A",message:a.message,detail:a.detail,column:a.column,hint:a.hint}}}(a)};throw a}(a))}},H=class extends G{constructor(a,b,c,d){super(a,c),this.options=b,this.pgOptions=c,this.cleanup=d}async commit(){F("[js::commit]"),this.cleanup?.(),this.client.release()}async rollback(){F("[js::rollback]"),this.cleanup?.(),this.client.release()}},I=class extends G{constructor(a,b,c){super(a),this.pgOptions=b,this.release=c}async startTransaction(a){let b={usePhantomQuery:!1};F("%s options: %O","[js::startTransaction]",b);let c=await this.client.connect().catch(a=>this.onError(a)),d=a=>{F(`Error from pool connection: ${a.message} %O`,a),this.pgOptions?.onConnectionError?.(a)};c.on("error",d);let e=()=>{c.removeListener("error",d)};try{let d=new H(c,b,this.pgOptions,e);return await d.executeRaw({sql:"BEGIN",args:[],argTypes:[]}),a&&await d.executeRaw({sql:`SET TRANSACTION ISOLATION LEVEL ${a}`,args:[],argTypes:[]}),d}catch(a){e(),c.release(a),this.onError(a)}}async executeScript(a){for(let b of a.split(";").map(a=>a.trim()).filter(a=>a.length>0))try{await this.client.query(b)}catch(a){this.onError(a)}}getConnectionInfo(){return{schemaName:this.pgOptions?.schema,supportsRelationJoins:!0}}async dispose(){return this.release?.()}underlyingDriver(){return this.client}},J=class{constructor(a,b){this.options=b,a instanceof g.default.Pool?(this.externalPool=a,this.config=a.options):(this.externalPool=null,this.config=a)}provider="postgres";adapterName=j;config;externalPool;async connect(){let a=this.externalPool??new g.default.Pool(this.config),b=a=>{F(`Error from idle pool client: ${a.message} %O`,a),this.options?.onPoolError?.(a)};return a.on("error",b),new I(a,this.options,async()=>{this.externalPool?this.options?.disposeExternalPool?(await this.externalPool.end(),this.externalPool=null):this.externalPool.removeListener("error",b):await a.end()})}async connectToShadowDb(){let a=await this.connect(),b=`prisma_migrate_shadow_db_${globalThis.crypto.randomUUID()}`;await a.executeScript(`CREATE DATABASE "${b}"`);let c=new g.default.Pool({...this.config,database:b});return new I(c,void 0,async()=>{await a.executeScript(`DROP DATABASE "${b}"`),await c.end()})}};d()}catch(a){d(a)}})},26520:(a,b)=>{function c(a){let b=null!=a;return function(c){let d=c.length-1;if(1===d)return[];if("}"!==c[d])throw Error("Invalid array text - must end with }");let e=0;if("["===c[0]&&(e=c.indexOf("=")+1),"{"!==c[e++])throw Error("Invalid array text - must start with {");let f=[],g=f,h=[],i=e,j="",k=!0;for(;e<d;++e){let f=c[e];if('"'===f){i=++e;let d=c.indexOf('"',i),f=c.indexOf("\\",i);for(;-1!==f&&f<d;)e=f,j+=c.slice(i,e),i=++e,d===e++&&(d=c.indexOf('"',e)),f=c.indexOf("\\",e);e=d,j+=c.slice(i,e),g.push(b?a(j):j),j="",k=!1}else if("{"===f){let a=[];g.push(a),h.push(g),g=a,i=e+1,k=!0}else if(","===f)k=!0;else if("}"===f){k=!1;let a=h.pop();if(void 0===a)throw Error("Invalid array text - too many '}'");g=a}else if(k){for(i=e;","!==(f=c[e])&&"}"!==f&&e<d;)++e;let h=c.slice(i,e--);g.push("NULL"===h?null:b?a(h):h),k=!1}else throw Error("Was expecting delimeter")}return f}}let d=c();b.q=(a,b)=>null!=b?c(b)(a):d(a)},73684:(a,b,c)=>{c.d(b,{UE:()=>f,sL:()=>e});var d=c(79651),e=class extends Error{name="DriverAdapterError";cause;constructor(a){super("string"==typeof a.message?a.message:a.kind),this.cause=a}};(0,d.y)("driver-adapter-utils");var f={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};Error("Not implemented: queryRaw"),Error("Not implemented: executeRaw"),Error("Not implemented: startTransaction"),Error("Not implemented: executeScript"),Error("Not implemented: dispose")},79651:(a,b,c)=>{c.d(b,{y:()=>S});var d,e,f,g,h=Object.defineProperty,i={};((a,b)=>{for(var c in b)h(a,c,{get:b[c],enumerable:!0})})(i,{$:()=>k,bgBlack:()=>E,bgBlue:()=>I,bgCyan:()=>K,bgGreen:()=>G,bgMagenta:()=>J,bgRed:()=>F,bgWhite:()=>L,bgYellow:()=>H,black:()=>u,blue:()=>y,bold:()=>n,cyan:()=>A,dim:()=>o,gray:()=>C,green:()=>w,grey:()=>D,hidden:()=>s,inverse:()=>r,italic:()=>p,magenta:()=>z,red:()=>v,reset:()=>m,strikethrough:()=>t,underline:()=>q,white:()=>B,yellow:()=>x});var j=!0;"undefined"!=typeof process&&({FORCE_COLOR:d,NODE_DISABLE_COLORS:e,NO_COLOR:f,TERM:g}=process.env||{},j=process.stdout&&process.stdout.isTTY);var k={enabled:!e&&null==f&&"dumb"!==g&&(null!=d&&"0"!==d||j)};function l(a,b){let c=RegExp(`\\x1b\\[${b}m`,"g"),d=`\x1b[${a}m`,e=`\x1b[${b}m`;return function(a){return k.enabled&&null!=a?d+(~(""+a).indexOf(e)?a.replace(c,e+d):a)+e:a}}var m=l(0,0),n=l(1,22),o=l(2,22),p=l(3,23),q=l(4,24),r=l(7,27),s=l(8,28),t=l(9,29),u=l(30,39),v=l(31,39),w=l(32,39),x=l(33,39),y=l(34,39),z=l(35,39),A=l(36,39),B=l(37,39),C=l(90,39),D=l(90,39),E=l(40,49),F=l(41,49),G=l(42,49),H=l(43,49),I=l(44,49),J=l(45,49),K=l(46,49),L=l(47,49),M=["green","yellow","blue","magenta","cyan","red"],N=[],O=Date.now(),P=0,Q="undefined"!=typeof process?process.env:{};globalThis.DEBUG??=Q.DEBUG??"",globalThis.DEBUG_COLORS??=!Q.DEBUG_COLORS||"true"===Q.DEBUG_COLORS;var R={enable(a){"string"==typeof a&&(globalThis.DEBUG=a)},disable(){let a=globalThis.DEBUG;return globalThis.DEBUG="",a},enabled(a){let b=globalThis.DEBUG.split(",").map(a=>a.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),c=b.some(b=>""!==b&&"-"!==b[0]&&a.match(RegExp(b.split("*").join(".*")+"$"))),d=b.some(b=>""!==b&&"-"===b[0]&&a.match(RegExp(b.slice(1).split("*").join(".*")+"$")));return c&&!d},log:(...a)=>{let[b,c,...d]=a;(console.warn??console.log)(`${b} ${c}`,...d)},formatters:{}},S=new Proxy(function(a){let b={color:M[P++%M.length],enabled:R.enabled(a),namespace:a,log:R.log,extend:()=>{}};return new Proxy((...a)=>{let{enabled:c,namespace:d,color:e,log:f}=b;if(0!==a.length&&N.push([d,...a]),N.length>100&&N.shift(),R.enabled(d)||c){let b=a.map(a=>"string"==typeof a?a:function(a,b=2){let c=new Set;return JSON.stringify(a,(a,b)=>{if("object"==typeof b&&null!==b){if(c.has(b))return"[Circular *]";c.add(b)}else if("bigint"==typeof b)return b.toString();return b},b)}(a)),c=`+${Date.now()-O}ms`;O=Date.now(),globalThis.DEBUG_COLORS?f(i[e](n(d)),...b,i[e](c)):f(d,...b,c)}},{get:(a,c)=>b[c],set:(a,c,d)=>b[c]=d})},{get:(a,b)=>R[b],set:(a,b,c)=>R[b]=c})}};